<!doctype html><html lang=en-us><head><title>Story of a simple update // DBuild</title><link rel="shortcut icon" href=/favicon.ico><meta charset=utf-8><meta name=generator content="Hugo 0.111.3"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=author content="D"><meta name=description content><link rel=stylesheet href=/css/main.min.4c093c2392ba07d2bb0df19e873341a0fdd7cbf687e94eea8f060d31a12b226b.css><meta name=twitter:card content="summary"><meta name=twitter:title content="Story of a simple update"><meta name=twitter:description content="No plans survive first contact, the best part is no part, check yo stagin"><meta property="og:title" content="Story of a simple update"><meta property="og:description" content="No plans survive first contact, the best part is no part, check yo stagin"><meta property="og:type" content="article"><meta property="og:url" content="https://dbuild.dev/projects/mdd/story-of-a-simple-update/"><meta property="article:section" content="Projects"><meta property="article:published_time" content="2023-11-08T10:58:02+02:00"><meta property="article:modified_time" content="2023-11-08T10:58:02+02:00"><script src=https://cdn.counter.dev/script.js data-id=154c6878-7558-4eff-90f9-bd4904015df1 data-utcoffset=1></script></head><body><header class=app-header><a href=https://dbuild.dev/><img class=app-header-avatar src=/logo.png alt=D></a>
<a href=https://dbuild.dev/ class=app-header-title>DBuild</a><p>I am D, I build things</p><div class=app-header-social><a href=https://github.com/DimitriGilbert target=_blank rel="noreferrer noopener me"><svg viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-github"><title>Github</title><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37.0 00-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44.0 0020 4.77 5.07 5.07.0 0019.91 1S18.73.65 16 2.48a13.38 13.38.0 00-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07.0 005 4.77 5.44 5.44.0 003.5 8.55c0 5.42 3.3 6.61 6.44 7A3.37 3.37.0 009 18.13V22"/></svg></a><a href=/index.xml target=_blank rel="noreferrer noopener me"><svg viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-rss"><title>RSS</title><path d="M4 11a9 9 0 019 9"/><path d="M4 4a16 16 0 0116 16"/><circle cx="5" cy="19" r="1"/></svg></a></div><nav class=app-header-menu><div><a class=app-header-menu-item href=/projects/>Projects</a></div>-<div><a class=app-header-menu-item href=/tags/tutorial>Tutorials</a></div>-<div><a class=app-header-menu-item href=/tags/devlog>DeVlog</a></div>-<div><a class=app-header-menu-item href=/black-hole>Black Hole</a></div></nav></header><main class=app-container><article class=post><header class=post-header><h1 class=post-title>Story of a simple update</h1><div class=post-meta><div><svg viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-calendar"><title>calendar</title><rect x="3" y="4" width="18" height="18" rx="2" ry="2"/><line x1="16" y1="2" x2="16" y2="6"/><line x1="8" y1="2" x2="8" y2="6"/><line x1="3" y1="10" x2="21" y2="10"/></svg>Nov 8, 2023</div><div><svg viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-clock"><title>clock</title><circle cx="12" cy="12" r="10"/><polyline points="12 6 12 12 16 14"/></svg>7 min read</div><div><svg viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tag"><title>tag</title><path d="M20.59 13.41l-7.17 7.17a2 2 0 01-2.83.0L2 12V2h10l8.59 8.59a2 2 0 010 2.82z"/><line x1="7" y1="7" x2="7.01" y2="7"/></svg><a class=tag href=https://dbuild.dev/tags/parsearger/>parseArger</a>
<a class=tag href=https://dbuild.dev/tags/mdd/>mdd</a>
<a class=tag href=https://dbuild.dev/tags/devlog/>devlog</a>
<a class=tag href=https://dbuild.dev/tags/bash/>bash</a>
<a class=tag href=https://dbuild.dev/tags/terminal/>terminal</a>
<a class=tag href=https://dbuild.dev/tags/tutorial/>tutorial</a></div></div></header><div class=post-content><div class=post-cnt><p>A small article on an mdd update, and the process behind it. Nothing fancy, but a little bit of food for thoughts ;).</p><h2 id=why-is-this-even-a-post>Why is this even a post</h2><p>First of all, I&rsquo;m trying to make content ! And, also, I almost went at it &ldquo;the wrong way&rdquo;, so I thought it would be a good idea to share my experience.</p><p>Now, if you never put your foot in your mouth when doing something, you should pass on the read, otherwise, you might find something interesting or at least feel less lonely.</p><p>It&rsquo;s on a very small scale and that is why I think it is such a good example. On top of which, you already are familiar with the project so you won&rsquo;t be lost, and also, it&rsquo;s a tutorial project&mldr;i&rsquo;m gonna milk it !</p><h2 id=tldr>TLDR</h2><p>I wanted to go at it fancy, separation between stuff and all, but I ended up doing it the simple way, and it&rsquo;s fine. At least for now.</p><p>Yes, it would have worked otherwise, it would have been fine or even great, prepared for improvement and shit, but, a mix of &ldquo;meh, can&rsquo;t be bothered&rdquo; and, &ldquo;hum, i certainly don&rsquo;t need that now&mldr;&rdquo; got the better of the fancyness.</p><p>Let&rsquo;s see how it all happened.</p><h2 id=heads-first>Heads first</h2><ul><li>&ldquo;I should create entry for my projects on the site&mldr;.huuuuuu, booooorrriiiing&mldr;.&rdquo;</li><li>&ldquo;well, you have a tool for that big dumb dumb&rdquo; (yes, we are talking to myself, no judgement !)</li><li>&ldquo;oooh yeah, hum&mldr; but it creates article only&mldr;&rdquo;</li><li>&ldquo;dude, decouple your thumbs from Uranus !&rdquo;</li><li>&ldquo;huuuuuu&mldr;..OOOOO KKAAAYYY&mldr;.&rdquo;</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>parseArger generate <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  --output bin/category <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  --help-message <span style=color:#e6db74>&#34;create a new category&#34;</span> <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  --pos <span style=color:#e6db74>&#39;title &#34;category title&#34;&#39;</span> <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  --opt <span style=color:#e6db74>&#39;folder &#34;article folder name&#34; --alias directory --alias dir&#39;</span> <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  --opt <span style=color:#e6db74>&#39;categories &#34;article parent categories&#34; --short c --repeat --alias cat --alias parent&#39;</span> <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  --opt <span style=color:#e6db74>&#39;date &#34;publication date meta&#34; --short d --alias publication --alias publish-at&#39;</span> <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  --opt <span style=color:#e6db74>&#39;summary &#34;summary meta&#34; --short s --alias description --alias desc&#39;</span> <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  --nested <span style=color:#e6db74>&#39;meta &#34;add any meta you want&#34;&#39;</span>
</span></span></code></pre></div><p>And then take that from <code>article</code>, and that, oh, and that, and&mldr;.</p><h2 id=heeeyy-wait-a-minute-aka-duh>Heeeyy, wait a minute, AKA duh</h2><p>So, all I did for the last 37 seconds (damn, <a href=https://github.com/DimitriGilbert/parseArger>parseArger</a> is SOOOO coool !) is copy pasting article to make a simpler version of it.</p><p>Because, when you think about it, categories in Hugo are just articles, but instead onf a <code>index.md</code> file, you have a <code>_index.md</code>, maybe, just maybe, we could add an option to specify the file name, it would even make <code>mdd article</code> more versatile.</p><p>To make things a bit more user friendly (yes, you can have friendly CLI !), we&rsquo;ll also add a flag to say it&rsquo;s a category so you don&rsquo;t have to write <code>--filename _index.md</code> every time.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>parseArger parse bin/article -i <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  --opt <span style=color:#e6db74>&#39;filename &#34;markdown file name&#34; --default-value index.md&#39;</span> <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  --flag <span style=color:#e6db74>&#39;is-category &#34;this is a category, using _index.md as filename&#34; --alias is-cat&#39;</span>
</span></span></code></pre></div><p>Let&rsquo;s modify our `bin/article file to reflect the new constraints.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># the end of the file </span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>if</span> <span style=color:#f92672>[</span> <span style=color:#e6db74>&#34;</span>$_arg_force<span style=color:#e6db74>&#34;</span> <span style=color:#f92672>==</span> <span style=color:#e6db74>&#34;on&#34;</span> <span style=color:#f92672>]</span> <span style=color:#f92672>&amp;&amp;</span> <span style=color:#f92672>[</span> -f <span style=color:#e6db74>&#34;</span><span style=color:#e6db74>${</span>_container_dir<span style=color:#e6db74>}</span><span style=color:#e6db74>/index.md&#34;</span> <span style=color:#f92672>]</span>; <span style=color:#66d9ef>then</span> 
</span></span><span style=display:flex><span>  rm <span style=color:#e6db74>&#34;</span><span style=color:#e6db74>${</span>_container_dir<span style=color:#e6db74>}</span><span style=color:#e6db74>/index.md&#34;</span> -f; 
</span></span><span style=display:flex><span><span style=color:#66d9ef>fi</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>if</span> <span style=color:#f92672>[</span> ! -f <span style=color:#e6db74>&#34;</span><span style=color:#e6db74>${</span>_container_dir<span style=color:#e6db74>}</span><span style=color:#e6db74>/index.md&#34;</span> <span style=color:#f92672>]</span>; <span style=color:#66d9ef>then</span>
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>if</span> <span style=color:#f92672>[</span> <span style=color:#e6db74>&#34;</span>$_arg_template<span style=color:#e6db74>&#34;</span> <span style=color:#f92672>==</span> <span style=color:#e6db74>&#34;&#34;</span> <span style=color:#f92672>]</span> <span style=color:#f92672>||</span> <span style=color:#f92672>[</span> ! -f <span style=color:#e6db74>&#34;</span>$_arg_template<span style=color:#e6db74>&#34;</span> <span style=color:#f92672>]</span>; <span style=color:#66d9ef>then</span>
</span></span><span style=display:flex><span>		<span style=color:#66d9ef>if</span> <span style=color:#f92672>[</span> <span style=color:#e6db74>&#34;</span>$_arg_template<span style=color:#e6db74>&#34;</span> !<span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;&#34;</span> <span style=color:#f92672>]</span>; <span style=color:#66d9ef>then</span>
</span></span><span style=display:flex><span>			log <span style=color:#e6db74>&#34;template </span>$_arg_template<span style=color:#e6db74> not found&#34;</span> -1;
</span></span><span style=display:flex><span>		<span style=color:#66d9ef>fi</span>
</span></span><span style=display:flex><span>		log <span style=color:#e6db74>&#34;using default template&#34;</span> 4;
</span></span><span style=display:flex><span>		_arg_template<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;</span><span style=color:#e6db74>${</span>_SCRIPT_DIR<span style=color:#e6db74>}</span><span style=color:#e6db74>/../templates/article.md&#34;</span>;
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>fi</span>
</span></span><span style=display:flex><span>	sed <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>		-e <span style=color:#e6db74>&#34;s/{{metas}}/</span>$_metas_str<span style=color:#e6db74>/g&#34;</span> <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>		-e <span style=color:#e6db74>&#34;s/{{content}}/</span>$_contents_str<span style=color:#e6db74>/g&#34;</span> <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>		<span style=color:#e6db74>&#34;</span>$_arg_template<span style=color:#e6db74>&#34;</span> &gt; <span style=color:#e6db74>&#34;</span><span style=color:#e6db74>${</span>_container_dir<span style=color:#e6db74>}</span><span style=color:#e6db74>/index.md&#34;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>else</span>
</span></span><span style=display:flex><span>	die <span style=color:#e6db74>&#34;file already exists: </span><span style=color:#e6db74>${</span>_container_dir<span style=color:#e6db74>}</span><span style=color:#e6db74>&#34;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>fi</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># is now </span>
</span></span><span style=display:flex><span><span style=color:#75715e># if is-category and filename not specified</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>if</span> <span style=color:#f92672>[</span> <span style=color:#e6db74>&#34;</span>$_arg_is_category<span style=color:#e6db74>&#34;</span> <span style=color:#f92672>==</span> <span style=color:#e6db74>&#34;on&#34;</span> <span style=color:#f92672>]</span> <span style=color:#f92672>&amp;&amp;</span> <span style=color:#f92672>[</span> <span style=color:#e6db74>&#34;</span>$_arg_filename<span style=color:#e6db74>&#34;</span> <span style=color:#f92672>==</span> <span style=color:#e6db74>&#34;index.md&#34;</span> <span style=color:#f92672>]</span>; <span style=color:#66d9ef>then</span>
</span></span><span style=display:flex><span>	_arg_filename<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;_index.md&#34;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>fi</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># using _arg_filename instead of index.md</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>if</span> <span style=color:#f92672>[</span> <span style=color:#e6db74>&#34;</span>$_arg_force<span style=color:#e6db74>&#34;</span> <span style=color:#f92672>==</span> <span style=color:#e6db74>&#34;on&#34;</span> <span style=color:#f92672>]</span> <span style=color:#f92672>&amp;&amp;</span> <span style=color:#f92672>[</span> -f <span style=color:#e6db74>&#34;</span><span style=color:#e6db74>${</span>_container_dir<span style=color:#e6db74>}</span><span style=color:#e6db74>/</span><span style=color:#e6db74>${</span>_arg_filename<span style=color:#e6db74>}</span><span style=color:#e6db74>&#34;</span> <span style=color:#f92672>]</span>; <span style=color:#66d9ef>then</span> 
</span></span><span style=display:flex><span>  rm <span style=color:#e6db74>&#34;</span><span style=color:#e6db74>${</span>_container_dir<span style=color:#e6db74>}</span><span style=color:#e6db74>/</span><span style=color:#e6db74>${</span>_arg_filename<span style=color:#e6db74>}</span><span style=color:#e6db74>&#34;</span> -f; 
</span></span><span style=display:flex><span><span style=color:#66d9ef>fi</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>if</span> <span style=color:#f92672>[</span> ! -f <span style=color:#e6db74>&#34;</span><span style=color:#e6db74>${</span>_container_dir<span style=color:#e6db74>}</span><span style=color:#e6db74>/</span><span style=color:#e6db74>${</span>_arg_filename<span style=color:#e6db74>}</span><span style=color:#e6db74>&#34;</span> <span style=color:#f92672>]</span>; <span style=color:#66d9ef>then</span>
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>if</span> <span style=color:#f92672>[</span> <span style=color:#e6db74>&#34;</span>$_arg_template<span style=color:#e6db74>&#34;</span> <span style=color:#f92672>==</span> <span style=color:#e6db74>&#34;&#34;</span> <span style=color:#f92672>]</span> <span style=color:#f92672>||</span> <span style=color:#f92672>[</span> ! -f <span style=color:#e6db74>&#34;</span>$_arg_template<span style=color:#e6db74>&#34;</span> <span style=color:#f92672>]</span>; <span style=color:#66d9ef>then</span>
</span></span><span style=display:flex><span>		<span style=color:#66d9ef>if</span> <span style=color:#f92672>[</span> <span style=color:#e6db74>&#34;</span>$_arg_template<span style=color:#e6db74>&#34;</span> !<span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;&#34;</span> <span style=color:#f92672>]</span>; <span style=color:#66d9ef>then</span>
</span></span><span style=display:flex><span>			log <span style=color:#e6db74>&#34;template </span>$_arg_template<span style=color:#e6db74> not found&#34;</span> -1;
</span></span><span style=display:flex><span>		<span style=color:#66d9ef>fi</span>
</span></span><span style=display:flex><span>		log <span style=color:#e6db74>&#34;using default template&#34;</span> 4;
</span></span><span style=display:flex><span>		_arg_template<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;</span><span style=color:#e6db74>${</span>_SCRIPT_DIR<span style=color:#e6db74>}</span><span style=color:#e6db74>/../templates/article.md&#34;</span>;
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>fi</span>
</span></span><span style=display:flex><span>	sed <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>		-e <span style=color:#e6db74>&#34;s/{{metas}}/</span>$_metas_str<span style=color:#e6db74>/g&#34;</span> <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>		-e <span style=color:#e6db74>&#34;s/{{content}}/</span>$_contents_str<span style=color:#e6db74>/g&#34;</span> <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>		<span style=color:#e6db74>&#34;</span>$_arg_template<span style=color:#e6db74>&#34;</span> &gt; <span style=color:#e6db74>&#34;</span><span style=color:#e6db74>${</span>_container_dir<span style=color:#e6db74>}</span><span style=color:#e6db74>/</span><span style=color:#e6db74>${</span>_arg_filename<span style=color:#e6db74>}</span><span style=color:#e6db74>&#34;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>else</span>
</span></span><span style=display:flex><span>	die <span style=color:#e6db74>&#34;file already exists: </span><span style=color:#e6db74>${</span>_container_dir<span style=color:#e6db74>}</span><span style=color:#e6db74>&#34;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>fi</span>
</span></span></code></pre></div><p>That simple, not even 10 lines (6, 6 lines, I counted them on re-read&mldr;.dawn you braiiiin) ! Definitly worth it if you consider the alternative would have been a new file, with mostly duplicated code.</p><p>I could have called <code>mdd article</code> in my new command and then renamed <code>index.md</code> to <code>_index.md</code>, but it did not seem like a great solution to add 500 lines of code and another file for 10 lines of functionality, when i could add 10 (6 I said ! and most of it is modification) more lines and do more.</p><h2 id=bug-fixes-and-chores>Bug fixes and chores</h2><p>Well, let&rsquo;s test our new toy, shall we ?</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>mdd article mdd --cat Projects --is-category <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  --summary <span style=color:#e6db74>&#34;My MarkDown tools, a parseArger tutorial project&#34;</span>
</span></span></code></pre></div><p>Directory and file created ok, let&rsquo;s add an article then.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>mdd article <span style=color:#e6db74>&#34;Story of a simple update&#34;</span> <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  --summary <span style=color:#e6db74>&#34;No plans survive first contact, the best part is no part, check yo&#39; stagin&#39;\!&#34;</span> <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  --h2 <span style=color:#e6db74>&#34;Why is this even a post&#34;</span> <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  --h2 <span style=color:#e6db74>&#34;TLDR&#34;</span> <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  --h2 <span style=color:#e6db74>&#34;Heads first&#34;</span> <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  --h2 <span style=color:#e6db74>&#34;Heeeyy, wait a minute, AKA &#39;duh&#39;&#34;</span> <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  --h2 <span style=color:#e6db74>&#34;Conclusion&#34;</span> <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  --h2 <span style=color:#e6db74>&#34;What now ?&#34;</span> <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  --cat Projects <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  --cat mdd <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  --tag parseArger <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  --tag mdd <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  --tag devlog <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  --tag bash <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  --tag tutorial
</span></span></code></pre></div><p>aaannnnnd <code>ERROR 2023/11/05 10:46:34 Rebuild failed: "/src/content/Projects/mdd/Story of a simple update/index.md:4:1": failed to unmarshal YAML: yaml: line 4: found character that cannot start any token</code>, NOOOPE !</p><p>A few minutes of head scratching, couple of copy paste and test and, yup, YAML do not like <code>\t</code> for arrays, it wants <code></code>&mldr; fine, what&mldr;eeeever.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#66d9ef>if</span> <span style=color:#f92672>[</span> <span style=color:#e6db74>&#34;</span><span style=color:#e6db74>${#</span>_arg_tags[@]<span style=color:#e6db74>}</span><span style=color:#e6db74>&#34;</span> -gt <span style=color:#ae81ff>0</span>  <span style=color:#f92672>]</span>; <span style=color:#66d9ef>then</span>
</span></span><span style=display:flex><span>	log <span style=color:#e6db74>&#34;</span><span style=color:#e6db74>${#</span>_arg_tags[@]<span style=color:#e6db74>}</span><span style=color:#e6db74> tags specified:&#34;</span> 4;
</span></span><span style=display:flex><span>	_metas_str<span style=color:#f92672>+=</span><span style=color:#e6db74>&#34;tags: \n&#34;</span>;
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>for</span> _tg in <span style=color:#e6db74>&#34;</span><span style=color:#e6db74>${</span>_arg_tags[@]<span style=color:#e6db74>}</span><span style=color:#e6db74>&#34;</span>; <span style=color:#66d9ef>do</span>
</span></span><span style=display:flex><span>		log <span style=color:#e6db74>&#34;\t</span>$_tg<span style=color:#e6db74>&#34;</span> 4;
</span></span><span style=display:flex><span>		_metas_str<span style=color:#f92672>+=</span><span style=color:#e6db74>&#34;\t- </span>$_tg<span style=color:#e6db74>\n&#34;</span>;
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>done</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>fi</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># is now this</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>if</span> <span style=color:#f92672>[</span> <span style=color:#e6db74>&#34;</span><span style=color:#e6db74>${#</span>_arg_tags[@]<span style=color:#e6db74>}</span><span style=color:#e6db74>&#34;</span> -gt <span style=color:#ae81ff>0</span>  <span style=color:#f92672>]</span>; <span style=color:#66d9ef>then</span>
</span></span><span style=display:flex><span>	log <span style=color:#e6db74>&#34;</span><span style=color:#e6db74>${#</span>_arg_tags[@]<span style=color:#e6db74>}</span><span style=color:#e6db74> tags specified:&#34;</span> 4;
</span></span><span style=display:flex><span>	_metas_str<span style=color:#f92672>+=</span><span style=color:#e6db74>&#34;tags: \n&#34;</span>;
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>for</span> _tg in <span style=color:#e6db74>&#34;</span><span style=color:#e6db74>${</span>_arg_tags[@]<span style=color:#e6db74>}</span><span style=color:#e6db74>&#34;</span>; <span style=color:#66d9ef>do</span>
</span></span><span style=display:flex><span>		log <span style=color:#e6db74>&#34;\t</span>$_tg<span style=color:#e6db74>&#34;</span> 4;
</span></span><span style=display:flex><span>    <span style=color:#75715e># RIGHT HERE, YOOOHOO</span>
</span></span><span style=display:flex><span>		_metas_str<span style=color:#f92672>+=</span><span style=color:#e6db74>&#34;  - </span>$_tg<span style=color:#e6db74>\n&#34;</span>;
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>done</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>fi</span>
</span></span></code></pre></div><p>Aaaand, &mldr;., it does not crash anymore \o/.</p><p>Maybe <code>article</code> for the command is not as good now, let&rsquo;s change it to <code>new</code> we have to regenerate doc and completion anyway.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>mv bin/article bin/new
</span></span><span style=display:flex><span>rm -f bin/category
</span></span></code></pre></div><p>Edit mdd and modify parsearger declaration to remove <code>--one-of article</code>, it won&rsquo;t be remove automagically, even if bin-directory it&rsquo;s on purpose, I&rsquo;ll probably add a flag for this behavior later</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># edit mdd replace</span>
</span></span><span style=display:flex><span>@parseArger pos target <span style=color:#e6db74>&#34;mdd subcommand&#34;</span> --subcommand-directory <span style=color:#e6db74>&#34;bin&#34;</span> --subcommand-run --subcommand-use-leftovers --subcommand --one-of <span style=color:#e6db74>&#34;article&#34;</span> --one-of <span style=color:#e6db74>&#34;new&#34;</span>
</span></span><span style=display:flex><span><span style=color:#75715e># with</span>
</span></span><span style=display:flex><span>@parseArger pos target <span style=color:#e6db74>&#34;mdd subcommand&#34;</span> --subcommand-directory <span style=color:#e6db74>&#34;bin&#34;</span> --subcommand-run --subcommand-use-leftovers --subcommand --one-of <span style=color:#e6db74>&#34;new&#34;</span>
</span></span></code></pre></div><p>A bit of parsing magic before documentation and completion generation.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>parseArger parse -i mdd
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>parseArger completely <span style=color:#e6db74>&#34;mdd&#34;</span> ./mdd --subcommand-directory ./bin --no-run-completely &gt; completely.yaml
</span></span><span style=display:flex><span>completely preview &gt; completely.bash
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>parseArger document --file ./mdd  --directory ./bin --title <span style=color:#e6db74>&#34;MarkDown for Didi&#34;</span> &gt; documentation.md
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>git add bin/new
</span></span><span style=display:flex><span>git commit -am <span style=color:#e6db74>&#39;ename to new + category creation + tag bug fix&#39;</span>
</span></span><span style=display:flex><span>git push origin main
</span></span></code></pre></div><p>It&rsquo;s now all ready to go \o/.</p><h2 id=conclusion>Conclusion</h2><p>Sometimes you don&rsquo;t need a bazooka to kill a fly, sometimes, you don&rsquo;t even need a gun (trust me, if I had access to guns, I&rsquo;d use that to kill flies, of course I would !) and sometimes you don&rsquo;t even need to kill this fly&mldr; BUT not Today !</p><p><strong>heavy hand droping on the table</strong></p><p>Oh no, Today, we squashed the damn bugger by doing almost nothing !</p><p>Joking aside, I think that there&rsquo;s a place and time for complexity, but it was not it.</p><p>The main objective of this project is simplicity, and adding that much more surface area so early did seem to go against that.</p><p>If there is something I realized over the years, fancy don&rsquo;t always mean effective, whether it&rsquo;s a small joke project or a big gargantuous blob of a software and we as <code>engineers</code> have a small (tiny, little, puny, dare I say it, nanoscopic !) tendency to want to add complexity, <code>because</code>.</p><p>Just, be aware of it when you plan your next stuff, and this was a good example ;)</p><h2 id=what-now->What now ?</h2><p>Nothing much, we had a look at updating a parseArger project and went over a bit of KISS principle.
Maybe it made you realize you went overboard with some of your work ? Do you have a way of alleviating this kind of behavior ? And, do you even care or do you embrace complexity and overkill ?</p><p>As always, you can report <a href="https://github.com/DimitriGilbert/parseArger/issues/new?assignees=&amp;labels=&amp;projects=&amp;template=bug_report.md&amp;title=">issues</a> or <a href="https://github.com/DimitriGilbert/parseArger/issues/new?assignees=&amp;labels=&amp;projects=&amp;template=feature_request.md&amp;title=">suggest ideas</a> on <a href=https://github.com/DimitriGilbert/parseArger/>parseArger github repository</a>. Or even better, you can submit <a href=https://github.com/DimitriGilbert/parseArger/compare>a pull request</a> if you added something you find meaningful.</p><p>Thanks for the read and I hope you found it useful (or at least entertaining :D )</p><p>See you around and happy coding !</p></div><div class=post-toc><nav id=TableOfContents><ul><li><a href=#why-is-this-even-a-post>Why is this even a post</a></li><li><a href=#tldr>TLDR</a></li><li><a href=#heads-first>Heads first</a></li><li><a href=#heeeyy-wait-a-minute-aka-duh>Heeeyy, wait a minute, AKA duh</a></li><li><a href=#bug-fixes-and-chores>Bug fixes and chores</a></li><li><a href=#conclusion>Conclusion</a></li><li><a href=#what-now->What now ?</a></li></ul></nav></div></div><div class=post-footer></div></article></main></body></html>