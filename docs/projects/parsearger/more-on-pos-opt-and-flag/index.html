<!doctype html><html lang=en-us><head><title>ParseArger, more on Pos Opt and Flag // DBuild</title><link rel="shortcut icon" href=/favicon.ico><meta charset=utf-8><meta name=generator content="Hugo 0.111.3"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=author content="D"><meta name=description content><link rel=stylesheet href=/css/main.min.4c093c2392ba07d2bb0df19e873341a0fdd7cbf687e94eea8f060d31a12b226b.css><meta name=twitter:card content="summary"><meta name=twitter:title content="ParseArger, more on Pos Opt and Flag"><meta name=twitter:description content="Options with default values ? Repeatable options or aliases maybe ? This is a deeper dive into parseArger&rsquo;s arguments, options and flags generation."><meta property="og:title" content="ParseArger, more on Pos Opt and Flag"><meta property="og:description" content="Options with default values ? Repeatable options or aliases maybe ? This is a deeper dive into parseArger&rsquo;s arguments, options and flags generation."><meta property="og:type" content="article"><meta property="og:url" content="https://dbuild.io/projects/parsearger/more-on-pos-opt-and-flag/"><meta property="article:section" content="Projects"><meta property="article:published_time" content="2023-10-13T14:56:33+02:00"><meta property="article:modified_time" content="2023-10-13T14:56:33+02:00"><script src=https://cdn.counter.dev/script.js data-id=154c6878-7558-4eff-90f9-bd4904015df1 data-utcoffset=1></script></head><body><header class=app-header><a href=https://dbuild.io/><img class=app-header-avatar src=/logo.png alt=D></a>
<a href=https://dbuild.io/ class=app-header-title>DBuild</a><p>I am D, I build things</p><nav class=app-header-menu><div><a class=app-header-menu-item href=/projects/>Projects</a></div>-<div><a class=app-header-menu-item href=/tags/tutorial>Tutorials</a></div>-<div><a class=app-header-menu-item href=/tags/devlog>DeVlog</a></div>-<div><a class=app-header-menu-item href=/black-hole>Black Hole</a></div></nav></header><main class=app-container><article class=post><header class=post-header><h1 class=post-title>ParseArger, more on Pos Opt and Flag</h1><div class=post-meta><div><svg viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-calendar"><title>calendar</title><rect x="3" y="4" width="18" height="18" rx="2" ry="2"/><line x1="16" y1="2" x2="16" y2="6"/><line x1="8" y1="2" x2="8" y2="6"/><line x1="3" y1="10" x2="21" y2="10"/></svg>Oct 13, 2023</div><div><svg viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-clock"><title>clock</title><circle cx="12" cy="12" r="10"/><polyline points="12 6 12 12 16 14"/></svg>5 min read</div><div><svg viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tag"><title>tag</title><path d="M20.59 13.41l-7.17 7.17a2 2 0 01-2.83.0L2 12V2h10l8.59 8.59a2 2 0 010 2.82z"/><line x1="7" y1="7" x2="7.01" y2="7"/></svg><a class=tag href=https://dbuild.io/tags/bash/>bash</a>
<a class=tag href=https://dbuild.io/tags/terminal/>terminal</a>
<a class=tag href=https://dbuild.io/tags/scripting/>scripting</a>
<a class=tag href=https://dbuild.io/tags/parsearger/>parseArger</a>
<a class=tag href=https://dbuild.io/tags/tutorial/>tutorial</a></div></div></header><div class=post-content><div class=post-cnt><p>Now that you know the basic of parseArger <code>generate</code> and <code>parse</code>, it&rsquo;s time to have a look at how we declare arguments, options and flags !</p><h2 id=--pos>&ndash;pos</h2><p>Positional arguments are what most of us use in a bash script with <code>$1</code>, <code>$2</code>, <code>$...</code>
Well same thing here, but they have names And much more :</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>arg-name: positional argument name
</span></span><span style=display:flex><span>description: positional argument description
</span></span><span style=display:flex><span>--one-of &lt;one-of&gt;: accepted values, repeatable
</span></span><span style=display:flex><span>--complete &lt;complete&gt;: bash built-in completely <span style=color:#66d9ef>function</span>, repeatable
</span></span><span style=display:flex><span>--complete-custom &lt;complete-custom&gt;: completely custom dynamic suggestion, repeatable
</span></span><span style=display:flex><span>--subcommand-directory &lt;subcommand-directory&gt;: directory containing subcommands, force subcommand, list parseArger script in directory to fill --one-of
</span></span><span style=display:flex><span>--subcommand-variable &lt;subcommand-variable&gt;: array variable containing subcommand parts, force subcommand <span style=color:#f92672>[</span>default: <span style=color:#e6db74>&#39; __subcommand &#39;</span><span style=color:#f92672>]</span>
</span></span><span style=display:flex><span>--subcommand|--no-subcommand: is a subcommand
</span></span><span style=display:flex><span>--subcommand-run|--no-subcommand-run: run subcommand, forces sub command
</span></span><span style=display:flex><span>--subcommand-use-leftovers|--no-subcommand-use-leftovers: add leftover arguments to subcommand, forces subcommand
</span></span></code></pre></div><p>And a dumb example that generates a script that take one argument my-cmd and execute it as a subcommand using the leftover arguments, my-cmd must be one of &ldquo;ls&rdquo;, &ldquo;cd&rdquo; or &ldquo;cat&rdquo; :</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>parseArger generate --pos <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  <span style=color:#e6db74>&#39;my-cmd &#34;an argument&#34; --subcommand --subcommand-run --subcommand-use-leftovers --one-of ls --one-of cd --one-of cat&#39;</span>
</span></span></code></pre></div><h3 id=arg-name>arg-name</h3><p>The argument name, <code>-</code> will be replaced with <code>_</code> and the variable will be prefixed with <code>_arg_</code>.
So &ndash;my-super-argument value is assigned to $_arg_my_super_argument.</p><h3 id=description>description</h3><p>Simple description for help, documentation and so on</p><h3 id=--one-of>&ndash;one-of</h3><p>Repeatable, The argument value must be one of, the most basic input validation, yeah !</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>parseArger generate --pos <span style=color:#e6db74>&#39;my-arg &#34;my argument description&#34; --one-of value1 --one-of value2&#39;</span>
</span></span></code></pre></div><h3 id=--complete>&ndash;complete</h3><p>Repeatable, <a href=https://github.com/DannyBen/completely#suggesting-files-directories-and-other-bash-built-ins>Completely built-ins</a>.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>parseArger generate --pos <span style=color:#e6db74>&#39;my-file &#34;this is a file path&#34; --complete file&#39;</span>
</span></span></code></pre></div><h3 id=--complete-custom>&ndash;complete-custom</h3><p>Repeatable, <a href=https://github.com/DannyBen/completely#suggesting-custom-dynamic-suggestions>Completely custom</a></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>parseArger generate --pos <span style=color:#e6db74>&#39;my-arg &#34;this is an argument&#34; --complete-custom &#34;\$(echo \&#34;some_value some_other you_get the_point\&#34;)&#34;&#39;</span>
</span></span></code></pre></div><h3 id=--subcommand-directory>&ndash;subcommand-directory</h3><p>You been a good kid and you did split your scripts ?
If they&rsquo;re all in the subcommand-directory, parseArger will add them to one of and build a __subcommand variable for you to use.
It forces &ndash;subcommand &mldr; in case you were wondering.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>parseArger generate --pos <span style=color:#e6db74>&#39;my-arg &#34;this is an argument&#34; --subcommand-directory bin&#39;</span>
</span></span></code></pre></div><h3 id=--subcommand-variable>&ndash;subcommand-variable</h3><p>Ooooh, oh you don&rsquo;t like __subcommand !!? What should it be called then ? It forces &ndash;subcommand.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>parseArger generate --pos <span style=color:#e6db74>&#39;my-arg &#34;this is an argument&#34; --subcommand-variable notAsubCommand&#39;</span>
</span></span></code></pre></div><h3 id=--subcommand>&ndash;subcommand</h3><p>This is a subcommand</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>parseArger generate --pos <span style=color:#e6db74>&#39;my-arg &#34;this is a command argument&#34; --subcommand&#39;</span>
</span></span></code></pre></div><h3 id=--subcommand-run>&ndash;subcommand-run</h3><p>Run the subcommand before handing you the script, forces &ndash;subcommand.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>parseArger generate --pos <span style=color:#e6db74>&#39;my-arg &#34;this is an argument&#34; --subcommand-run&#39;</span>
</span></span></code></pre></div><h3 id=--subcommand-use-leftovers>&ndash;subcommand-use-leftovers</h3><p>Maybe those leftovers are worth something&mldr;, after all ! Forces &ndash;subcommand</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>parseArger generate --pos <span style=color:#960050;background-color:#1e0010>&#39;</span>my-arg <span style=color:#e6db74>&#34;this is an argument&#34;</span> --subcommand-use-leftovers
</span></span></code></pre></div><h2 id=--opt>&ndash;opt</h2><p>I&rsquo;m pretty sure most of you were waiting for that : (add ethereal music here) options !</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>arg-name: positional argument name
</span></span><span style=display:flex><span>description: positional argument description
</span></span><span style=display:flex><span>--repeat-min &lt;repeat-min&gt;: minimum repeatition forces repeat <span style=color:#f92672>[</span>default: <span style=color:#e6db74>&#39; 1 &#39;</span><span style=color:#f92672>]</span>
</span></span><span style=display:flex><span>--repeat-max &lt;repeat-max&gt;: maximum repeatition forces repeat
</span></span><span style=display:flex><span>--one-of &lt;one-of&gt;: accepted values, repeatable
</span></span><span style=display:flex><span>-d, --default-value &lt;default-value&gt;: value, repeatable
</span></span><span style=display:flex><span>-s, --short &lt;short&gt;: short form
</span></span><span style=display:flex><span>--alias &lt;alias&gt;: option alias, repeatable
</span></span><span style=display:flex><span>--empty-value &lt;empty-value&gt;: value <span style=color:#66d9ef>for</span> empty option
</span></span><span style=display:flex><span>--complete &lt;complete&gt;: bash built-in completely <span style=color:#66d9ef>function</span>, repeatable
</span></span><span style=display:flex><span>--complete-custom &lt;complete-custom&gt;: completely custom dynamic suggestion, repeatable
</span></span><span style=display:flex><span>-r|--repeat|--no-repeat: repeatable
</span></span><span style=display:flex><span>--empty|--no-empty: use option as flag
</span></span></code></pre></div><p>I won&rsquo;t bore you with arg-name and description, and if you need me too, you might want to re read the previous part a tiny tad more attentively, maybe, if you&rsquo;d like to.</p><h3 id=--repeat-min>&ndash;repeat-min</h3><p>Repeatable option, yes ! but at least this many ! Forces &ndash;repeat.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>parseArger generate --opt <span style=color:#960050;background-color:#1e0010>&#39;</span>my-opt <span style=color:#e6db74>&#34;this is an option&#34;</span> --repeat-min <span style=color:#ae81ff>42</span>
</span></span></code></pre></div><h3 id=--repeat-max>&ndash;repeat-max</h3><p>Repeatable option, yes ! but not too much ! Forces &ndash;repeat.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>parseArger generate --opt <span style=color:#960050;background-color:#1e0010>&#39;</span>my-opt <span style=color:#e6db74>&#34;this is an option&#34;</span> --repeat-max <span style=color:#ae81ff>69</span>
</span></span></code></pre></div><h3 id=--one-of-1>&ndash;one-of</h3><p>see &ndash;pos &ndash;one-of above, it&rsquo;s the same ;)</p><h3 id=--default-value>&ndash;default-value</h3><p>An option, why not, but it shall not be empty !</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>parseArger generate --opt <span style=color:#e6db74>&#39;my-opt &#34;musnt be eeeemmmmpty&#34; --default-value &#34;this is not empty&#34;&#39;</span>
</span></span></code></pre></div><h3 id=--short>&ndash;short</h3><p>I know ya&rsquo;ll concerned about bodily efficiency (my mom called that &ldquo;lazy&rdquo;&mldr;), letters matters ! you got 26 of&rsquo;em, that&rsquo;s how many options max my scripts have !</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>parseArger generate --opt <span style=color:#e6db74>&#39;my-opt &#34;lazily call me&#34; --short o&#39;</span>
</span></span></code></pre></div><h3 id=--alias>&ndash;alias</h3><p>I know it&rsquo;s hard to always agree (especially with yourself !), with aliases, no more decision (about option names), you can have your cake, and eat it, too !</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>parseArger generate --opt <span style=color:#e6db74>&#39;a-opt &#34;lazily call me&#34; --alias &#34;an-opt&#34; --alias &#34;an-option&#34; --alias &#34;needlessly-long-option-name&#34;&#39;</span>
</span></span></code></pre></div><h3 id=--short-1>&ndash;short</h3><p>I know ya&rsquo;ll concerned about bodily efficiency (my mom called that &ldquo;lazy&rdquo;&mldr;), letters matters ! you got 26 of&rsquo;em, that&rsquo;s how many options max my scripts have !</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>parseArger generate --opt <span style=color:#e6db74>&#39;my-opt &#34;lazily call me&#34; --short o&#39;</span>
</span></span></code></pre></div><h3 id=--complete-1>&ndash;complete</h3><p>see &ndash;pos &ndash;complete above, it&rsquo;s the same ;)</p><h3 id=--complete-custom-1>&ndash;complete-custom</h3><p>see &ndash;pos &ndash;complete-custom above, it&rsquo;s the same ;)</p><h3 id=--repeat>&ndash;repeat</h3><p>You can now have multiple values for your option. the option is now an array, even if only one value is given.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>parseArger generate --opt <span style=color:#e6db74>&#39;my-opt &#34;look ma&#39;</span>, I<span style=color:#e6db74>&#39;am an array !&#34; --repeat&#39;</span>
</span></span></code></pre></div><h3 id=--empty>&ndash;empty</h3><p>Option or flag ? Well, why not both ? A flag if you don&rsquo;t give it anything, an option otherwise !</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>parseArger generate --opt <span style=color:#e6db74>&#39;my-opt &#34;option&gt;flag superposition&#34; --empty&#39;</span>
</span></span></code></pre></div><h2 id=--flag>&ndash;flag</h2><p>Ahoy ! raise the flaaaaaag ! (I&rsquo;d say I&rsquo;m grasping at branches, but it seems tree do not grow in the ocean&mldr;)</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>arg-name: positional argument name
</span></span><span style=display:flex><span>description: positional argument description
</span></span><span style=display:flex><span>-s, --short &lt;short&gt;: short form
</span></span><span style=display:flex><span>--no-name &lt;no-name&gt;: value <span style=color:#66d9ef>for</span> the negation
</span></span><span style=display:flex><span>--alias &lt;alias&gt;: flag alias, repeatable
</span></span><span style=display:flex><span>--no-alias &lt;no-alias&gt;: flag negation alias, repeatable
</span></span><span style=display:flex><span>--on|--no-on: on by default
</span></span></code></pre></div><p>You know the drill with arg-name, description, &ndash;short and alias, it&rsquo;s up above ;)</p><h3 id=--no-name>&ndash;no-name</h3><p><code>--no-&lt;flag-name></code> do not fly ? Fine, you choose !</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>parseArger generate --flag <span style=color:#e6db74>&#39;do-that &#34;flabbergasted, flag a...&#34; --no-name dont-do-that&#39;</span>
</span></span></code></pre></div><h3 id=--no-alias>&ndash;no-alias</h3><p>There are plenty of ways to say no !</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>parseArger generate --flag <span style=color:#e6db74>&#39;do-that &#34;flabbergasted, flag a...&#34; --no-alias this-instead --no-alias do-this&#39;</span>
</span></span></code></pre></div><h3 id=--on>&ndash;on</h3><p>It&rsquo;s already on&mldr; but you can turn it off.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>parseArger generate --flag <span style=color:#e6db74>&#39;do-that &#34;flabbergasted, flag a...&#34; --on&#39;</span>
</span></span></code></pre></div><h2 id=what-now->What now ?</h2><p>Now you almost have the whole view on parseArger, enough for simple scripts anyway !
But maybe you do not value your mental health much and would like to create a whole program in bash ?
Well, What a coincidence, next time we&rsquo;ll have a look at the <code>project</code> command, it&rsquo;ll help you do just that ! (the program part, I do not deal in mental health)
As always bugs and suggestions should go on <a href=https://github.com/DimitriGilbert/parseArger>parseArger&rsquo;s github repo</a>.</p><p>Thanks for the read and I hope you found it useful (or at least entertaining :D )</p><p>See you around and happy coding !</p></div><div class=post-toc><nav id=TableOfContents><ul><li><a href=#--pos>&ndash;pos</a><ul><li><a href=#arg-name>arg-name</a></li><li><a href=#description>description</a></li><li><a href=#--one-of>&ndash;one-of</a></li><li><a href=#--complete>&ndash;complete</a></li><li><a href=#--complete-custom>&ndash;complete-custom</a></li><li><a href=#--subcommand-directory>&ndash;subcommand-directory</a></li><li><a href=#--subcommand-variable>&ndash;subcommand-variable</a></li><li><a href=#--subcommand>&ndash;subcommand</a></li><li><a href=#--subcommand-run>&ndash;subcommand-run</a></li><li><a href=#--subcommand-use-leftovers>&ndash;subcommand-use-leftovers</a></li></ul></li><li><a href=#--opt>&ndash;opt</a><ul><li><a href=#--repeat-min>&ndash;repeat-min</a></li><li><a href=#--repeat-max>&ndash;repeat-max</a></li><li><a href=#--one-of-1>&ndash;one-of</a></li><li><a href=#--default-value>&ndash;default-value</a></li><li><a href=#--short>&ndash;short</a></li><li><a href=#--alias>&ndash;alias</a></li><li><a href=#--short-1>&ndash;short</a></li><li><a href=#--complete-1>&ndash;complete</a></li><li><a href=#--complete-custom-1>&ndash;complete-custom</a></li><li><a href=#--repeat>&ndash;repeat</a></li><li><a href=#--empty>&ndash;empty</a></li></ul></li><li><a href=#--flag>&ndash;flag</a><ul><li><a href=#--no-name>&ndash;no-name</a></li><li><a href=#--no-alias>&ndash;no-alias</a></li><li><a href=#--on>&ndash;on</a></li></ul></li><li><a href=#what-now->What now ?</a></li></ul></nav></div></div><div class=post-footer></div></article></main></body></html>