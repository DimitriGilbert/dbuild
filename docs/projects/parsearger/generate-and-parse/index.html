<!doctype html><html lang=en-us><head><title>ParseArger, generate and Parse // DBuild</title><link rel="shortcut icon" href=/favicon.ico><meta charset=utf-8><meta name=generator content="Hugo 0.111.3"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=author content="D"><meta name=description content><link rel=stylesheet href=/css/main.min.4c093c2392ba07d2bb0df19e873341a0fdd7cbf687e94eea8f060d31a12b226b.css><meta name=twitter:card content="summary"><meta name=twitter:title content="ParseArger, generate and Parse"><meta name=twitter:description content="Deeper dive in parseArger generate and parse commands arguments and options."><meta property="og:title" content="ParseArger, generate and Parse"><meta property="og:description" content="Deeper dive in parseArger generate and parse commands arguments and options."><meta property="og:type" content="article"><meta property="og:url" content="https://dbuild.io/projects/parsearger/generate-and-parse/"><meta property="article:section" content="Projects"><meta property="article:published_time" content="2023-10-10T14:55:13+02:00"><meta property="article:modified_time" content="2023-10-10T14:55:13+02:00"><script src=https://cdn.counter.dev/script.js data-id=154c6878-7558-4eff-90f9-bd4904015df1 data-utcoffset=1></script></head><body><header class=app-header><a href=https://dbuild.io/><img class=app-header-avatar src=/logo.png alt=D></a>
<a href=https://dbuild.io/ class=app-header-title>DBuild</a><p>I am D, I build things</p><nav class=app-header-menu><div><a class=app-header-menu-item href=/projects/>Projects</a></div>-<div><a class=app-header-menu-item href=/tags/tutorial>Tutorials</a></div>-<div><a class=app-header-menu-item href=/tags/devlog>DeVlog</a></div>-<div><a class=app-header-menu-item href=/black-hole>Black Hole</a></div></nav></header><main class=app-container><article class=post><header class=post-header><h1 class=post-title>ParseArger, generate and Parse</h1><div class=post-meta><div><svg viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-calendar"><title>calendar</title><rect x="3" y="4" width="18" height="18" rx="2" ry="2"/><line x1="16" y1="2" x2="16" y2="6"/><line x1="8" y1="2" x2="8" y2="6"/><line x1="3" y1="10" x2="21" y2="10"/></svg>Oct 10, 2023</div><div><svg viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-clock"><title>clock</title><circle cx="12" cy="12" r="10"/><polyline points="12 6 12 12 16 14"/></svg>5 min read</div><div><svg viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tag"><title>tag</title><path d="M20.59 13.41l-7.17 7.17a2 2 0 01-2.83.0L2 12V2h10l8.59 8.59a2 2 0 010 2.82z"/><line x1="7" y1="7" x2="7.01" y2="7"/></svg><a class=tag href=https://dbuild.io/tags/bash/>bash</a>
<a class=tag href=https://dbuild.io/tags/terminal/>terminal</a>
<a class=tag href=https://dbuild.io/tags/scripting/>scripting</a>
<a class=tag href=https://dbuild.io/tags/parsearger/>parsearger</a>
<a class=tag href=https://dbuild.io/tags/tutorial/>tutorial</a></div></div></header><div class=post-content><div class=post-cnt><p>We <a href=/projects/parsearger/create-bash-scripts-youll-want-to-use>previously</a> had a quick look at <a href=https://dimitrigilbert.github.io/parseArger/>parseArger</a>.
Let&rsquo;s focus on the generate and parse command today !
I tried to make my arguments descriptions fairly clear, but an example is always nice don&rsquo;t you think ?</p><h2 id=generate>Generate</h2><p>This command will generate (yeah I know, much creativity) a new bash script.
We&rsquo;ll have a look at them one by one but here are the whole lot of arguments, options and flags for the command. (yes, this is the output from &ndash;help ^^)</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>-p, --pos &lt;pos&gt;: positional argument declaration, repeatable
</span></span><span style=display:flex><span>-o, --opt &lt;opt&gt;: optional arg declaration, repeatable
</span></span><span style=display:flex><span>-f, --flag &lt;flag&gt;: flag declaration, repeatable
</span></span><span style=display:flex><span>-s, --set &lt;set&gt;: declare var, repeatable
</span></span><span style=display:flex><span>-l, --source &lt;source&gt;: file to source, repeatable
</span></span><span style=display:flex><span>-m, --help-message &lt;help-message&gt;: help message <span style=color:#66d9ef>for</span> the command <span style=color:#f92672>[</span>default: <span style=color:#e6db74>&#39; I send an SOS to the world &#39;</span><span style=color:#f92672>]</span>
</span></span><span style=display:flex><span>--help-option &lt;help-option&gt;: help option trigger
</span></span><span style=display:flex><span>--help-short-option &lt;help-short-option&gt;: short help option
</span></span><span style=display:flex><span>--leftovers-name &lt;leftovers-name&gt;: extra arguments variable name <span style=color:#f92672>[</span>default: <span style=color:#e6db74>&#39; leftovers &#39;</span><span style=color:#f92672>]</span>
</span></span><span style=display:flex><span>--use-shebang &lt;use-shebang&gt;: shebang executable <span style=color:#f92672>[</span>default: <span style=color:#e6db74>&#39; /bin/bash &#39;</span><span style=color:#f92672>]</span>
</span></span><span style=display:flex><span>--set-version &lt;set-version&gt;: set version number
</span></span><span style=display:flex><span>--version-opt-name &lt;version-opt-name&gt;: version option name <span style=color:#f92672>[</span>default: <span style=color:#e6db74>&#39; version &#39;</span><span style=color:#f92672>]</span>
</span></span><span style=display:flex><span>--version-short-option &lt;version-short-option&gt;: version short option name <span style=color:#f92672>[</span>default: <span style=color:#e6db74>&#39; v &#39;</span><span style=color:#f92672>]</span>
</span></span><span style=display:flex><span>--die-fn-name &lt;die-fn-name&gt;: die <span style=color:#66d9ef>function</span> name <span style=color:#f92672>[</span>default: <span style=color:#e6db74>&#39; die &#39;</span><span style=color:#f92672>]</span>
</span></span><span style=display:flex><span>--log-fn-name &lt;log-fn-name&gt;: log <span style=color:#66d9ef>function</span> name <span style=color:#f92672>[</span>default: <span style=color:#e6db74>&#39; log &#39;</span><span style=color:#f92672>]</span>
</span></span><span style=display:flex><span>--verbose-opt-name &lt;verbose-opt-name&gt;: verbose option name <span style=color:#f92672>[</span>default: <span style=color:#e6db74>&#39; verbose &#39;</span><span style=color:#f92672>]</span>
</span></span><span style=display:flex><span>--verbose-level &lt;verbose-level&gt;: default verbose level <span style=color:#f92672>[</span>default: <span style=color:#e6db74>&#39; 0 &#39;</span><span style=color:#f92672>]</span>
</span></span><span style=display:flex><span>--leftovers|--no-leftovers: accept extra arguments
</span></span><span style=display:flex><span>--bang|--no-bang: include shebang, on by default <span style=color:#f92672>(</span>use --no-bang to turn it off<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>--version-opt|--no-version-opt: generate version opt handling, on by default <span style=color:#f92672>(</span>use --no-version-opt to turn it off<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>--use-verbose|--no-use-verbose: generate verbose level parser, on by default <span style=color:#f92672>(</span>use --no-use-verbose to turn it off<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>--parse-leftovers|--no-parse-leftovers: parse leftovers, force leftover
</span></span></code></pre></div><p>Forget about &ndash;pos &ndash;opt and &ndash;flag, we are going over them in a different article.</p><h3 id=--set>&ndash;set</h3><p>repeatable, declare a variable at the top of the script.
It can use <code>$()</code> to run commands but be careful about escaping (which might cause trouble with parsing sometimes&mldr;)</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>parseArger generate --set <span style=color:#e6db74>&#39;my_var=&#34;my value&#34;&#39;</span> <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  --set <span style=color:#e6db74>&#39;my_var_dynamic_var=&#34;\$(cat /a/file)&#34;&#39;</span>
</span></span></code></pre></div><h3 id=--source>&ndash;source</h3><p>repeatable, source a file at the top of the script.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>parseArger generate --source <span style=color:#e6db74>&#34;/path/to/the/file&#34;</span>
</span></span></code></pre></div><h3 id=--help-message>&ndash;help-message</h3><p>the script help message. It might be a good idea to make it useful, but you don&rsquo;t have to&mldr; 3:-D</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>parseArger generate --help-message <span style=color:#e6db74>&#39;my script does something&#39;</span>
</span></span></code></pre></div><h3 id=--help-option>&ndash;help-option</h3><p>option used to trigger help, the fact that you can does not mean that you should.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>parseArger generate --help-option <span style=color:#e6db74>&#39;not-very-helpful-help-opt&#39;</span>
</span></span></code></pre></div><h3 id=--help-short-option>&ndash;help-short-option</h3><p>short option help trigger</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>parseArger generate --help-short-option z
</span></span><span style=display:flex><span><span style=color:#75715e># because why not z ?</span>
</span></span></code></pre></div><h3 id=--leftovers-name>&ndash;leftovers-name</h3><p>extra argument array variable name. Forces &ndash;leftovers flag.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>parseArger generate --leftovers-name <span style=color:#e6db74>&#34;extra_args&#34;</span>
</span></span></code></pre></div><h3 id=--use-shebang>&ndash;use-shebang</h3><p>specify the shebang, the generated script does not change though, use at your own risk ;).
If you have cross shell compatibility tips and tricks, I am all ears !</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>parseArger generate --use-shebang <span style=color:#e6db74>&#34;#!/bin/zsh&#34;</span>
</span></span></code></pre></div><h3 id=--set-version>&ndash;set-version</h3><p>give a version to the script, not enforcing any kind of whatever here, you can <code>--set-version "potato"</code>, i won&rsquo;t judge</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>parseArger generate --set-version <span style=color:#e6db74>&#34;0.1-alpha-preview-48&#34;</span>
</span></span></code></pre></div><h3 id=--version-opt-name>&ndash;version-opt-name</h3><p>version trigger option, <code>--version</code> by default, but if you hate conventions.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>parseArger generate --version-opt-name revision
</span></span></code></pre></div><h3 id=--version-short-option>&ndash;version-short-option</h3><p>short option trigger for version</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>parseArger generate --version-short-option i
</span></span></code></pre></div><h3 id=--die-fn-name>&ndash;die-fn-name</h3><p>who wouldn&rsquo;t choose how one dies ? Bar that, I&rsquo;ll let you choose how your script dies.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>parseArger generate --die-fn-name wasted
</span></span></code></pre></div><h3 id=--log-fn-name>&ndash;log-fn-name</h3><p>same as die, but I have nothing funny to add, so I think I am just rambling at this point, don&rsquo;t you think ?</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>parseArger generate --log-fn-name report
</span></span></code></pre></div><h3 id=--verbose-opt-name>&ndash;verbose-opt-name</h3><p>.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>parseArger generate --verbose-opt-name tmi
</span></span></code></pre></div><h3 id=--verbose-level>&ndash;verbose-level</h3><p>default verbose level for your script</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>parseArger generate --verbose-level <span style=color:#ae81ff>42</span>
</span></span></code></pre></div><h3 id=--leftovers----no-leftovers>&ndash;leftovers | &ndash;no-leftovers</h3><p>do not waste ! Think about those poor scripts which do not have options.
So you pack all these nice extra arguments and options in an array for later ! And do not read from stdin before you finished it all !!</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>parseArger generate --leftovers
</span></span></code></pre></div><p>The array variable is <code>$_arg_leftovers</code> or <code>$_arg_&lt;whatever you chose with --leftovers-name></code>.</p><h3 id=--parse-leftovers----no-parse-leftovers>&ndash;parse-leftovers | &ndash;no-parse-leftovers</h3><p>Force &ndash;leftovers and if you hate unordered mess, you can parse the leftovers and look for option like syntax to be extracted in an associative array. How neat.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>parseArger generate --parse-leftovers
</span></span></code></pre></div><p>The array variable is <code>$_arg_parsed_leftovers</code> or <code>$_arg_parsed_&lt;whatever you chose with --leftovers-name></code>.</p><h3 id=--bang----no-bang>&ndash;bang | &ndash;no-bang</h3><p>use a shebang, on by default</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>parseArger generate --no-bang
</span></span></code></pre></div><h3 id=--version-opt----no-version-opt>&ndash;version-opt | &ndash;no-version-opt</h3><p>versions are for looooooosers ! #mainOrDie</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>parseArger generate --no-version-opt
</span></span></code></pre></div><h3 id=--use-verbose----no-use-verbose>&ndash;use-verbose | &ndash;no-use-verbose</h3><p>when you have nothing to say anyway (or way too many, and you won&rsquo;t stop, and you know you should, but you won&rsquo;t&mldr;)</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>parseArger generate --no-use-verbose
</span></span></code></pre></div><h2 id=parse>Parse</h2><p>Whether it is because you forgot something, &ldquo;oooh, i might be able to do that&mldr;&rdquo; or &ldquo;DO THAT !&rdquo;, requirements change, just generating the script is already nice but a way to update it would be nicer, like if we couuuuld&mldr; <em>parse</em> the script (&mldr;).
Like with <code>generate</code> command, the whole bunch of options and then details, if you don&rsquo;t find the documentation below, it&rsquo;s because it&rsquo;s the same as <code>generate</code>, so look up !</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>file: file to parse
</span></span><span style=display:flex><span>-p, --pos &lt;pos&gt;: add positional argument declaration, repeatable
</span></span><span style=display:flex><span>-o, --opt &lt;opt&gt;: add optional arg declaration, repeatable
</span></span><span style=display:flex><span>-f, --flag &lt;flag&gt;: add flag declaration, repeatable
</span></span><span style=display:flex><span>-s, --set &lt;set&gt;: add declare var, repeatable
</span></span><span style=display:flex><span>-l, --source &lt;source&gt;: add file to source, repeatable
</span></span><span style=display:flex><span>--set-version &lt;set-version&gt;: set version
</span></span><span style=display:flex><span>-i|--inplace|--no-inplace: replace parseArger generated content in place
</span></span><span style=display:flex><span>--leftovers|--no-leftovers: add leftovers
</span></span><span style=display:flex><span>--parse-leftovers|--no-parse-leftovers: parse leftovers
</span></span></code></pre></div><h3 id=file>file</h3><p>path to the file to parse, yes it is a positional argument, thank you for noticing the absence of <code>-</code>.
You are such an attentive reader :)</p><h3 id=--inplace>&ndash;inplace</h3><p>update the file directly, goes to stdout by default</p><h2 id=what-now->What now ?</h2><p>Another article is coming to dive deeper in &ndash;pos, &ndash;opt and &ndash;flag options for both generate and parse so you can truly take full advantage of parseArger ;) !
But this has been most of my usage, barebones arguments, simple options (and a few flags, not often).
This is such a step up from bash scripts I created in the past, especially with the generated help !
What about you ? Would this help you or are you using other languages when &ldquo;more complex&rdquo; scripts are needed ?</p><p>Thanks for the read and I hope you found it useful (or at least entertaining :D )</p><p>See you around and happy coding !</p></div><div class=post-toc><nav id=TableOfContents><ul><li><a href=#generate>Generate</a><ul><li><a href=#--set>&ndash;set</a></li><li><a href=#--source>&ndash;source</a></li><li><a href=#--help-message>&ndash;help-message</a></li><li><a href=#--help-option>&ndash;help-option</a></li><li><a href=#--help-short-option>&ndash;help-short-option</a></li><li><a href=#--leftovers-name>&ndash;leftovers-name</a></li><li><a href=#--use-shebang>&ndash;use-shebang</a></li><li><a href=#--set-version>&ndash;set-version</a></li><li><a href=#--version-opt-name>&ndash;version-opt-name</a></li><li><a href=#--version-short-option>&ndash;version-short-option</a></li><li><a href=#--die-fn-name>&ndash;die-fn-name</a></li><li><a href=#--log-fn-name>&ndash;log-fn-name</a></li><li><a href=#--verbose-opt-name>&ndash;verbose-opt-name</a></li><li><a href=#--verbose-level>&ndash;verbose-level</a></li><li><a href=#--leftovers----no-leftovers>&ndash;leftovers | &ndash;no-leftovers</a></li><li><a href=#--parse-leftovers----no-parse-leftovers>&ndash;parse-leftovers | &ndash;no-parse-leftovers</a></li><li><a href=#--bang----no-bang>&ndash;bang | &ndash;no-bang</a></li><li><a href=#--version-opt----no-version-opt>&ndash;version-opt | &ndash;no-version-opt</a></li><li><a href=#--use-verbose----no-use-verbose>&ndash;use-verbose | &ndash;no-use-verbose</a></li></ul></li><li><a href=#parse>Parse</a><ul><li><a href=#file>file</a></li><li><a href=#--inplace>&ndash;inplace</a></li></ul></li><li><a href=#what-now->What now ?</a></li></ul></nav></div></div><div class=post-footer></div></article></main></body></html>